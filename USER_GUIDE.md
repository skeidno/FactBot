# FactBot 用户使用手册

## 欢迎使用 FactBot

FactBot 是一个强大的数据运维助手，提供航司报价查询、配置管理和日志查看等功能。

## 快速开始

### 安装运行

1. **下载应用**
   - 从发布页面下载对应平台的安装包
   - Windows: `fact-bot.exe`
   - macOS: `fact-bot.app`
   - Linux: `fact-bot`

2. **启动应用**
   - 双击运行程序
   - 首次启动会自动初始化数据库

### 界面介绍

```
┌─────────────────────────────────────────┐
│  FactBot v0.1.0                    ─ □ ✕ │
├──────┬──────────────────────────────────┤
│ 🏠   │                                  │
│ ✈️   │                                  │
│ ⚙️   │        主要内容区域               │
│ 📋   │                                  │
│      │                                  │
│ 🔔   │                                  │
│ ❓   │                                  │
└──────┴──────────────────────────────────┘
```

**左侧侧边栏**：
- 🏠 首页
- ✈️ 航司报价
- ⚙️ 配置管理
- 📋 日志查看
- 🔔 通知
- ❓ 帮助

## 主要功能

### 1. 首页

欢迎页面，展示应用功能和快速入口。

**功能特性**：
- 产品介绍
- 快速导航
- 功能卡片

### 2. 航司报价

查询多家航司的报价信息。

**支持航司**：
- 16 家主流航司
- 实时价格查询
- 多条件筛选

### 3. 配置管理

管理代理、OTP 邮箱、支付卡片和购票人信息。

#### 3.1 代理配置

**功能**：
- 分组管理代理
- 批量导入
- 支持认证

**使用步骤**：
1. 点击 "新建分组"
2. 输入分组名称
3. 点击 "批量导入"
4. 输入代理信息（格式：`ip:port:username:password`）
5. 点击 "保存分组配置"

**批量导入格式**：
```
127.0.0.1:7890:user1:pass1
192.168.1.1:8080:user2:pass2
10.0.0.1:3128
```

#### 3.2 OTP 邮箱

管理 OTP 验证码接收邮箱。

**配置项**：
- 邮箱名称
- 邮箱地址
- API Key
- 服务提供商

#### 3.3 支付卡片

管理支付卡片信息。

**配置项**：
- 卡片类型
- 卡号
- CVV
- 有效期
- 持卡人姓名

#### 3.4 购票人信息

管理购票人信息。

**配置项**：
- 姓名
- 邮箱
- 电话
- 护照号

### 4. 日志查看 ⭐

查看和管理任务执行日志。

#### 4.1 筛选功能

**任务名称**（必填）
- 从下拉框选择任务
- 自动从数据库提取

**任务 UUID**（选填）
- 根据任务名称动态显示
- 支持模糊匹配

**日志级别**（选填）
- 🔵 DEBUG：调试信息
- ⚪ INFO：一般信息
- 🟡 WARN：警告信息
- 🔴 ERROR：错误信息

**关键词搜索**（选填）
- 在日志内容中搜索
- 支持包含匹配

**时间排序**
- ⬇ 最新在前（默认）
- ⬆ 最旧在前

#### 4.2 查看日志

**步骤**：
1. 选择任务名称
2. （可选）选择其他筛选条件
3. 点击 "🔍 查询日志"
4. 查看结果

**日志表格**：
| 任务 ID | 级别 | 时间 | 日志内容 | 操作 |
|---------|------|------|----------|------|
| abc123... | 🔴 ERROR | 12:00:00 | 请求失败... | 📋 复制 |

**功能说明**：
- **任务 ID**：显示 UUID 前 8 位，鼠标悬停查看完整 ID
- **级别**：带颜色标识的日志级别
- **时间**：日志记录时间
- **日志内容**：
  - 超过 100 字符自动截断
  - 鼠标悬停显示完整内容（气泡）
  - 气泡最大高度 300px，可滚动
- **操作**：点击 "📋 复制" 按钮复制完整日志

#### 4.3 分页功能

- 每页显示：20/50/100/200 条可选
- 翻页：上一页 / 下一页
- 页码显示：当前页 / 总页数

#### 4.4 使用技巧

**快速查看错误**：
```
1. 选择任务名称
2. 日志级别选 "ERROR"
3. 点击查询
```

**追踪特定任务**：
```
1. 选择任务名称
2. 选择或输入任务 UUID
3. 点击查询
```

**搜索特定操作**：
```
1. 选择任务名称
2. 输入关键词（如 "连接"、"请求"）
3. 点击查询
```

**查看任务执行过程**：
```
1. 选择任务名称
2. 选择任务 UUID
3. 排序选 "最旧在前"
4. 点击查询
```

## 数据存储

### 配置数据库

- **位置**：
  - Windows: `C:\Users\<用户>\AppData\Roaming\FactBot\config.db`
  - macOS: `~/Library/Application Support/FactBot/config.db`
  - Linux: `~/.local/share/FactBot/config.db`
- **内容**：应用配置、用户设置
- **安全**：密码保护

### 日志数据库

- **位置**：软件运行目录下的 `logs.db`
- **内容**：任务执行日志
- **安全**：无密码保护（方便查看）

## 常见问题

### Q: 如何查看日志？

A: 点击左侧 📋 图标，选择任务名称，点击查询。

### Q: 为什么看不到 DEBUG 日志？

A: 正式版默认隐藏 DEBUG 日志，只显示 INFO/WARN/ERROR。

### Q: 如何复制日志内容？

A: 点击日志行右侧的 "📋 复制" 按钮，或鼠标悬停查看完整内容后手动复制。

### Q: UUID 下拉框是空的？

A: UUID 需要先选择任务名称后才会显示。

### Q: 如何清空日志？

A: 目前需要手动删除 `logs.db` 文件，或使用 SQLite 工具清空。

### Q: 日志太多怎么办？

A: 使用筛选功能：
- 选择特定任务 UUID
- 选择特定日志级别
- 使用关键词搜索
- 调整每页显示数量

### Q: 如何导出日志？

A: 目前可以：
1. 使用复制按钮逐条复制
2. 使用 SQLite 工具导出数据库
3. 未来版本将支持批量导出

### Q: 配置数据保存在哪里？

A: 配置数据保存在用户数据目录的 `config.db` 文件中，卸载应用不会删除。

### Q: 如何备份数据？

A: 复制以下文件：
- 配置：`config.db`（用户数据目录）
- 日志：`logs.db`（软件运行目录）

### Q: 应用无法启动？

A: 检查：
1. 是否有足够的磁盘空间
2. 是否有读写权限
3. 查看错误日志
4. 尝试删除数据库文件重新初始化

## 快捷操作

### 键盘快捷键

- `F12`：打开开发者工具（调试用）
- `Ctrl+C` / `Cmd+C`：复制选中内容
- `Ctrl+V` / `Cmd+V`：粘贴

### 鼠标操作

- **单击**：选择、点击按钮
- **悬停**：查看完整内容（日志、UUID）
- **拖动**：移动窗口（标题栏）

## 性能建议

### 日志管理

- 定期清理旧日志
- 使用筛选减少查询范围
- 调整每页显示数量

### 配置管理

- 合理分组管理配置
- 避免保存过多无用配置
- 定期备份重要配置

## 更新日志

### v0.1.0（当前版本）

**新功能**：
- ✅ 航司报价查询
- ✅ 配置管理（代理、OTP、卡片、购票人）
- ✅ 日志查看系统
- ✅ 浏览器指纹模拟（75+ 种）
- ✅ 环境区分（dev / 正式版）

**优化**：
- ✅ 日志内容截断 + 气泡提示
- ✅ 一键复制日志
- ✅ 分页显示
- ✅ 多条件筛选

## 技术支持

### 获取帮助

1. 点击左侧 ❓ 图标查看帮助
2. 查看本文档
3. 联系技术支持

### 反馈问题

如遇到问题，请提供：
- 操作步骤
- 错误信息
- 截图（如有）
- 日志文件

### 联系方式

- 邮箱：liuzilong326@163.com

## 附录

### 日志级别说明

| 级别 | 图标 | 颜色 | 说明 |
|------|------|------|------|
| DEBUG | 🔵 | 蓝色 | 调试信息，开发时使用 |
| INFO | ⚪ | 白色 | 一般信息，正常运行日志 |
| WARN | 🟡 | 黄色 | 警告信息，需要注意 |
| ERROR | 🔴 | 红色 | 错误信息，需要处理 |

### 批量导入格式

**代理格式**：
```
ip:port:username:password  # 带认证
ip:port                    # 不带认证
```

**示例**：
```
127.0.0.1:7890:user:pass
192.168.1.1:8080
```

### 数据库表结构

**日志表 (logs)**：
- id：日志 ID
- task_name：任务名称
- log_level：日志级别
- task_uuid：任务 UUID
- timestamp：时间戳
- message：日志内容

**配置表 (config)**：
- key：配置键
- value：配置值
- created_at：创建时间
- updated_at：更新时间

---

感谢使用 FactBot！如有问题，请随时联系我们。
